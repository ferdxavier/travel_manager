# Note: Este ficheiro contﾃｩm mﾃｺltiplos schemas, referenciados pelo nome.

# ====================================================================
# --- 0. BaseEntityProperties (ID e Timestamps - Usado para heranﾃｧa) ---
# ====================================================================
BaseEntityProperties:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: "ID ﾃｺnico gerado pelo sistema."
      example: "a1b2c3d4-e5f6-7890-1234-567890abcdef"
    createdAt:
      type: string
      format: date-time
      description: "Timestamp de criaﾃｧﾃ｣o do registro."
      example: "2025-01-25T10:00:00Z"

# ====================================================================
# --- 1. PROPRIEDADES COMUNS REUTILIZﾃ〃EIS (VehicleCommonProperties) ---
# Inclui a nova flag 'x-unique: true' para campos identificadores.
# ====================================================================
VehicleCommonProperties:
  type: object
  properties:
    licensePlate:
      type: string
      description: "Placa do veﾃｭculo. Formato Mercosul (LLLNLNN)."
      example: "ABC1F34"
      minLength: 7
      maxLength: 7
      pattern: "^[a-zA-Z]{3}[0-9][a-zA-Z][0-9]{2}$"
      x-ui-label: "Placa"
      # 泊 RESTRICﾃグ DE UNICIDADE ADICIONADA
      x-unique: true
    model:
      type: string
      description: "Modelo e nome do veﾃｭculo."
      example: "520 HP"
      minLength: 2
      maxLength: 20
      x-ui-label: "Modelo"
    vehicleManufacturer:
      type: string
      description: "Fabricante do veﾃｭculo."
      example: "Scania"
      minLength: 2
      maxLength: 20
      x-ui-label: "Fabricante (Marca)"
    modelYear:
      type: integer
      description: "Ano do Modelo do veﾃｭculo."
      example: 2024
      minimum: 1980
      maximum: 2099
      x-ui-label: "Ano do Modelo"
    manufacturerYear:
      type: integer
      description: "Ano de fabricaﾃｧﾃ｣o do veﾃｭculo."
      example: 2023
      minimum: 1980
      maximum: 2099
      x-ui-label: "Ano de Fabricaﾃｧﾃ｣o"
    renavan:
      type: string
      description: "Nﾃｺmero do RENAVAN do veﾃｭculo."
      example: "4566546465"
      minLength: 6
      maxLength: 10
      x-ui-label: "Nﾃｺmero do RENAVAN"
      # 泊 RESTRICﾃグ DE UNICIDADE ADICIONADA
      x-unique: true
    passengerNumber:
      type: integer
      description: "Em caso de veﾃｭculo de transporte, o nﾃｺmero de passageiros."
      example: 50
      minimum: 1
      maximum: 80
      x-ui-label: "Nﾂｺ de Passageiros"
    motorNumber:
      type: string
      description: "Nﾃｺmero do motor do veﾃｭculo."
      example: "20234565"
      minLength: 2
      maxLength: 20
      x-ui-label: "Nﾃｺmero do Motor"
      # 泊 RESTRICﾃグ DE UNICIDADE ADICIONADA
      x-unique: true
    chassisNumber:
      type: string
      description: "Nﾃｺmero do chassis do veﾃｭculo."
      example: "BDH546SDFG565465SD5656BR"
      minLength: 10
      maxLength: 40
      x-ui-label: "Nﾃｺmero do Chassi"
      # 泊 RESTRICﾃグ DE UNICIDADE ADICIONADA
      x-unique: true
    fleetNumber:
      type: integer
      description: "Nﾃｺmero interno que corresponte ao id do veﾃｭculo da frota da empresa."
      example: 1803
      minimum: 1
      maximum: 99999999
      x-ui-label: "Nﾃｺmero de Frota (ID Interno)"
      # 泊 RESTRICﾃグ DE UNICIDADE ADICIONADA
      x-unique: true
    fuelTankCapacity:
      type: number
      format: float
      description: "Capacidade do tanque de combustivel do veﾃｭculo."
      example: 500.5
      minimum: 1
      maximum: 10000
      x-ui-label: "Capacidade do Tanque em (Litros)"
    entryMileage:
      type: integer
      description: "Quilometragem do veﾃｭculo na entrada da empresa (no cadastro)."
      example: 3000000
      minimum: 0
      maximum: 10000000
      x-ui-label: "Quilometragem de Entrada (Km)"
    averageConsumption:
      type: number
      format: float
      description: "Mﾃｩdia de Quilﾃｴmetros por litro de conbustivel."
      example: 2.6
      minimum: 0.1
      maximum: 50.0
      x-ui-label: "Consumo Mﾃｩdio (Km/L)"
    bodyManufacturer:
      type: string
      description: "Fabricante da carroceria."
      example: "Marcopolo"
      minLength: 2
      maxLength: 20
      x-ui-label: "Fabricante da Carroceria"
    bodyModel:
      type: string
      description: "Nome do modelo da carroceria."
      example: "G6 1200"
      minLength: 2
      maxLength: 20
      x-ui-label: "Modelo da Carroceria"
    axesNumber:
      type: integer
      description: "Nﾃｺmero de eixos que o veﾃｭculo possui."
      example: 3
      minimum: 2
      maximum: 20
      x-ui-label: "Nﾃｺmero de Eixos"
    engineDescription:
      type: string
      description: "Descriﾃｧﾃ｣o do motor."
      example: "B10 M Intercooler"
      minLength: 3
      maxLength: 100
      x-ui-label: "Descriﾃｧﾃ｣o do Motor"
    hasBathroom:
      type: boolean
      description: "Se o veﾃｭculo possui banheiro"
      example: true
      x-ui-label: "Possui banheiro"
    status:
      type: string
      enum:
        - available
        - maintenance
        - retired
      default: available
      description: "Status operacional atual/desejado do veﾃｭculo."
      x-ui-label: "Status Operacional"


# ====================================================================
# --- 1.5. VehicleFullBase (Schema para Composiﾃｧﾃ｣o de Resposta Completa) ---
# Combina BaseEntityProperties e VehicleCommonProperties.
# ====================================================================
VehicleFullBase:
  type: object
  description: "Propriedades de base e comuns do Veﾃｭculo."
  allOf:
    - $ref: '#/BaseEntityProperties'
    - $ref: '#/VehicleCommonProperties'


# ====================================================================
# --- 2. Vehicle (Objeto de Resposta Completa) ---
# Referencia apenas o schema de base completo.
# ====================================================================
Vehicle:
  type: object
  description: "Representaﾃｧﾃ｣o completa de um veﾃｭculo na frota."
  allOf:
    - $ref: '#/VehicleFullBase'
  required:
    - id
    - licensePlate
    - model
    - status

# ====================================================================
# --- 3. CreateVehicleRequest (Objeto de Criaﾃｧﾃ｣o - Input) ---
# CORREﾃﾃグ: Usando $ref direto para evitar warnings de allOf/0.
# ====================================================================
CreateVehicleRequest:
  type: object
  description: "Dados necessﾃ｡rios para criar um veﾃｭculo (sem o ID gerado pelo sistema e timestamps)."
  allOf:
    - $ref: '#/VehicleCommonProperties'
  required:
    - licensePlate
    - vehicleManufacturer
    - model
    - modelYear
    - manufacturerYear
    - passengerNumber
    - hasBathroom
    - chassisNumber
    - status

# ====================================================================
# --- 4. UpdateVehicleRequest (Objeto de Atualizaﾃｧﾃ｣o - Input Parcial) ---
# CORREﾃﾃグ: Usando $ref direto para evitar warnings de allOf/0.
# ====================================================================
UpdateVehicleRequest:
  type: object
  description: "Dados opcionais necessﾃ｡rios para atualizar parcialmente um veﾃｭculo existente (suporte a PATCH). Pelo menos um campo deve ser fornecido."
  allOf:
    - $ref: '#/VehicleCommonProperties'
